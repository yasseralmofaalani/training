<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ุงูููู ุงูุฃุฎูุฑ: ุชุญููู ูุธุงู ุงูุนูููุงุช ุงูุนุณูุฑูุฉ - GIS ุงููุณุชูู 0</title>

     <link rel="stylesheet" href="css/leaflet.css" />

   <!-- <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>-->
    <link href="css/font.css"
        rel="stylesheet">

  <style>
    :root {
      --bg: #0b1220;
      --panel: rgba(255, 255, 255, 0.08);
      --panel2: rgba(255, 255, 255, 0.12);
      --text: #ffffff;
      --muted: rgba(255, 255, 255, 0.72);
      --accent: #00d4ff;
      --accent2: #f1c40f;
      --danger: #ff4d4d;
      --ok: #2ecc71;
      --glass: rgba(255, 255, 255, 0.08);
      --border: rgba(255, 255, 255, 0.15);
      --shadow: 0 10px 30px rgba(0, 0, 0, 0.35);
      --radius: 18px;
    }

    * {
      box-sizing: border-box;
      font-family: "Tajawal", sans-serif;
    }

    body {
      margin: 0;
      background: radial-gradient(circle at top, #101b2f, #060b14);
      color: var(--text);
      overflow-x: hidden;
    }

    /* ====== MAP ====== */
    #map-container {
      position: fixed;
      inset: 0;
      z-index: 0;
    }

    #map {
      width: 100%;
      height: 100%;
      filter: contrast(1.05) saturate(1.1);
    }

    /* ====== OVERLAY UI ====== */
    .topbar {
      position: fixed;
      top: 14px;
      left: 50%;
      transform: translateX(-50%);
      width: min(1000px, 92%);
      z-index: 9999;
      display: flex;
      gap: 12px;
      align-items: center;
      justify-content: space-between;
      padding: 12px 14px;
      border-radius: 20px;
      background: rgba(0, 0, 0, 0.55);
      border: 1px solid rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(10px);
      box-shadow: var(--shadow);
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .brand .logo {
      width: 40px;
      height: 40px;
      border-radius: 14px;
      background: linear-gradient(135deg, var(--accent), #0077ff);
      display: grid;
      place-items: center;
      font-weight: 800;
      box-shadow: 0 0 20px rgba(0, 212, 255, 0.25);
    }

    .brand .title {
      font-size: 14px;
      font-weight: 700;
      line-height: 1.2;
    }

    .brand .subtitle {
      font-size: 12px;
      color: var(--muted);
    }

    .progress-wrap {
      flex: 1;
      display: flex;
      align-items: center;
      gap: 12px;
      margin-inline: 10px;
    }

    .progress-bar {
      flex: 1;
      height: 10px;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.12);
      overflow: hidden;
      border: 1px solid rgba(255, 255, 255, 0.14);
    }

    .progress-bar span {
      display: block;
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, var(--accent), #2ecc71);
      border-radius: 999px;
      transition: width 0.5s ease;
    }

    .step-indicator {
      display: flex;
      gap: 6px;
      align-items: center;
      font-size: 12px;
      color: var(--muted);
      white-space: nowrap;
    }

    .restart-btn {
      border: 0;
      padding: 10px 14px;
      border-radius: 14px;
      background: rgba(255, 255, 255, 0.12);
      color: white;
      cursor: pointer;
      font-weight: 700;
      transition: 0.2s;
    }

    .restart-btn:hover {
      background: rgba(255, 255, 255, 0.18);
      transform: translateY(-1px);
    }

    /* ====== TOOLTIP OVER MAP ====== */
    .map-tooltip {
      position: fixed;
      bottom: 18px;
      left: 18px;
      z-index: 9999;
      width: min(420px, 90%);
      padding: 14px 16px;
      border-radius: 18px;
      background: rgba(0, 0, 0, 0.62);
      border: 1px solid rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(10px);
      box-shadow: var(--shadow);
      animation: fadeIn 0.4s ease;
    }

    .map-tooltip h4 {
      margin: 0 0 6px;
      font-size: 14px;
      color: var(--accent);
    }

    .map-tooltip p {
      margin: 0;
      font-size: 13px;
      color: rgba(255, 255, 255, 0.85);
      line-height: 1.7;
    }

    /* ====== MINI LEGEND ====== */
    .mini-legend {
      position: fixed;
      bottom: 18px;
      right: 18px;
      z-index: 9999;
      width: min(320px, 90%);
      padding: 14px 16px;
      border-radius: 18px;
      background: rgba(0, 0, 0, 0.62);
      border: 1px solid rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(10px);
      box-shadow: var(--shadow);
    }

    .mini-legend h4 {
      margin: 0 0 8px;
      font-size: 14px;
      color: var(--accent2);
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 12px;
      color: rgba(255, 255, 255, 0.85);
      margin-bottom: 6px;
    }

    .legend-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: white;
      border: 1px solid rgba(255, 255, 255, 0.25);
    }

    /* ====== INFO CARD ====== */
    .info-card {
      position: fixed;
      top: 90px;
      left: 18px;
      z-index: 9999;
      width: min(360px, 92%);
      padding: 14px 16px;
      border-radius: 18px;
      background: rgba(0, 0, 0, 0.62);
      border: 1px solid rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(10px);
      box-shadow: var(--shadow);
      display: none;
    }

    .info-card.active {
      display: block;
      animation: fadeIn 0.4s ease;
    }

    .info-card h4 {
      margin: 0 0 8px;
      font-size: 14px;
      color: #2ecc71;
    }

    .info-card p {
      margin: 0;
      font-size: 13px;
      color: rgba(255, 255, 255, 0.85);
      line-height: 1.7;
    }

    /* ====== SCROLL CONTENT ====== */
    main#scrolly {
      position: relative;
      z-index: 10;
      width: 100%;
    }

    section.step {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 60px 18px;
      scroll-margin-top: 120px;
    }

    .panel {
      width: min(860px, 95%);
      border-radius: var(--radius);
      padding: 24px 22px;
      background: rgba(0, 0, 0, 0.62);
      border: 1px solid rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(10px);
      box-shadow: var(--shadow);
      animation: fadeIn 0.5s ease;
    }

    .panel h2 {
      margin: 0 0 12px;
      font-size: 22px;
      color: var(--accent);
    }

    .panel p {
      margin: 0;
      font-size: 15px;
      color: rgba(255, 255, 255, 0.88);
      line-height: 1.9;
    }

    .panel ul {
      margin: 14px 0 0;
      padding: 0 20px 0 0;
      line-height: 2;
      color: rgba(255, 255, 255, 0.88);
      font-size: 14px;
    }

    .tag {
      display: inline-block;
      padding: 6px 10px;
      border-radius: 999px;
      background: rgba(0, 212, 255, 0.15);
      border: 1px solid rgba(0, 212, 255, 0.3);
      color: rgba(255, 255, 255, 0.9);
      font-size: 12px;
      font-weight: 700;
      margin-bottom: 12px;
    }

    .highlight {
      margin-top: 12px;
      padding: 12px 14px;
      border-radius: 14px;
      background: rgba(241, 196, 15, 0.12);
      border: 1px solid rgba(241, 196, 15, 0.25);
      color: rgba(255, 255, 255, 0.9);
      font-size: 13px;
      line-height: 1.8;
    }

    /* ====== NAV ====== */
    .story-nav {
      position: fixed;
      bottom: 100px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 9999;
      display: flex;
      gap: 12px;
    }

    .nav-btn {
      border: 0;
      padding: 12px 18px;
      border-radius: 16px;
      cursor: pointer;
      font-weight: 800;
      color: white;
      background: #ff4d4d;
      border: 1px solid rgba(255, 255, 255, 0.16);
      backdrop-filter: blur(8px);
      transition: 0.2s;
    }

    .nav-btn:hover {
      transform: translateY(-2px);
      background: rgba(255, 255, 255, 0.18);
    }

    .nav-btn:disabled {
      opacity: 0.35;
      cursor: not-allowed;
      transform: none;
    }

    /* ====== SPOTLIGHT ====== */
    .spotlight {
      position: fixed;
      inset: 0;
      z-index: 5000;
      pointer-events: none;
      background: radial-gradient(circle at center, transparent 0%, rgba(0, 0, 0, 0.85) 55%);
      opacity: 0;
      transition: opacity 0.5s ease;
    }

    .spotlight.active {
      opacity: 1;
    }

    /* ====== ICON MARKERS ====== */
    .unit-icon {
      width: 28px;
      height: 28px;
      border-radius: 12px;
      display: grid;
      place-items: center;
      font-size: 12px;
      font-weight: 800;
      color: white;
      border: 2px solid rgba(255, 255, 255, 0.85);
      box-shadow: 0 0 14px rgba(0, 0, 0, 0.55);
    }

    .friendly {
      background: linear-gradient(135deg, #3498db, #1abc9c);
    }

    .critical {
      background: linear-gradient(135deg, #f39c12, #e67e22);
    }

    .risk {
      background: linear-gradient(135deg, #ff4d4d, #c0392b);
    }

    .pulse {
      animation: pulse 1.4s infinite;
    }

    @keyframes pulse {
      0% {
        transform: scale(1);
        opacity: 1;
      }

      50% {
        transform: scale(1.18);
        opacity: 0.75;
      }

      100% {
        transform: scale(1);
        opacity: 1;
      }
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* ====== MOBILE ====== */
    @media(max-width: 768px) {
      .topbar {
        flex-direction: column;
        gap: 10px;
        padding: 12px;
      }

      .progress-wrap {
        width: 100%;
        margin-inline: 0;
      }

      .story-nav {
        bottom: 140px;
      }

      .panel h2 {
        font-size: 18px;
      }

      .panel p {
        font-size: 14px;
      }
    }
  </style>
</head>

<body>

  <div id="map-container">
    <div id="map"></div>
  </div>

  <div class="spotlight" id="spotlight"></div>

  <div class="topbar">
    <div class="brand">
      <div class="logo">GIS</div>
      <div>
        <div class="title">ุงูููู ุงูุฃุฎูุฑ: ุชุญููู ูุดุฑูุน ูุธุงู ุงูุนูููุงุช</div>
        <div class="subtitle">Military Operations System (ุนุฑุถ ุชูุงุนูู ุชุฏุฑูุจู)</div>
      </div>
    </div>

    <div class="progress-wrap">
      <div class="progress-bar"><span id="progressFill"></span></div>
      <div class="step-indicator" id="stepIndicator">1 / 45</div>
    </div>
<button class="restart-btn" id="openIframeBtn" style="background:#3498db;">๐ ุนุฑุถ ุงููููุน ุงูุญูููู</button>

    <button class="restart-btn" id="restartBtn">๐ ุฅุนุงุฏุฉ ุชุดุบูู</button>
	
  </div>

  <div class="info-card" id="infoCard">
    <h4>ูุนูููุฉ ุณุฑูุนุฉ</h4>
    <p id="infoText">...</p>
  </div>

  <div class="map-tooltip">
    <h4 id="tooltipTitle">ุดุฑุญ ูุจุงุดุฑ</h4>
    <p id="tooltipText">ุงุจุฏุฃ ุงูุชูุฑูุฑ ูุฑุคูุฉ ููู ูุชุญูู ุงููุธุงู ุฅูู ูุฑุงุฑ.</p>
  </div>

  <div class="mini-legend">
    <h4 id="legendTitle">Legend</h4>
    <div id="legendItems"></div>
  </div>
<!-- Modal Iframe -->
<div id="iframeModal" style="display:none;position:fixed;inset:0;z-index:10000;
    background:rgba(0,0,0,0.7);backdrop-filter:blur(6px);">
  <div style="position:absolute;inset:0;margin:auto;max-width:95%;max-height:95%;
      border-radius:14px;overflow:hidden;border:3px solid #fff;">
    <div style="position:relative;height:42px;background:rgba(0,0,0,0.64);
        display:flex;align-items:center;justify-content:space-between;padding:0 14px;">
      <div style="color:#fff;font-size:14px;font-weight:700;">ุนุฑุถ ุงููููุน ุงูุญูููู</div>
      <button id="closeIframe" style="background:#e74c3c;color:#fff;border:none;
          padding:6px 12px;border-radius:8px;cursor:pointer;font-weight:800;">โ๏ธ ุฅุบูุงู</button>
    </div>
    <iframe id="liveIframe" src=""
        style="width:100%;height:calc(100% - 42px);border:none;"></iframe>
  </div>
</div>

  <main id="scrolly">

    <!-- 45 SECTIONS -->
    <section class="step" data-step="s1">
      <div class="panel">
        <span class="tag">1 / 45</span>
        <h2>ุงูููุฏูุฉ: ููุงุฐุง ูุฐุง ุงููุดุฑูุน ูููุ</h2>
        <p>
          ูู ุงูููู ุงูุฃุฎูุฑ ุณูุญูู ูุดุฑูุน ุญูููู ุชู ุจูุงุคู ูุณุจูุงู: <b>Military Operations System</b>.
          ุงููุฏู ูู ููู ููู ูุชุญูู GIS ูู "ุฎุฑูุทุฉ" ุฅูู ูุธุงู ูุฑุงุฑ ุดุงูู ูุฏุนู ุงูููุงุฏุฉุ ุงูุชุญูููุ ูุฅุฏุงุฑุฉ ุงูููุงุฑุฏ.
        </p>
        <div class="highlight">ุงูุฎุฑูุทุฉ ุณุชุจุฏุฃ ูู ุงูุดุฑู ุงูุฃูุณุท ูุฅุธูุงุฑ ููููู ุงูุฏูุงุน ุงูุฅููููู.</div>
      </div>
    </section>

    <section class="step" data-step="s2">
      <div class="panel">
        <span class="tag">2 / 45</span>
        <h2>ููุฑุฉ ุงููุธุงู (Operational GIS Platform)</h2>
        <p>
          ุงููุธุงู ููุณ ูุฌุฑุฏ ุนุฑุถ ุจูุงูุงุชุ ุจู ูู ููุตุฉ ุชูุญูุฏ ุทุจูุงุช ูุชุนุฏุฏุฉ: ุญุฏูุฏุ ููุดุขุชุ ูุณุงุฑุงุชุ ูุฎุงุทุฑุ ุชุญูููุงุชุ ูุฅุญุตุงุฆูุงุช.
        </p>
      </div>
    </section>

    <section class="step" data-step="s3">
      <div class="panel">
        <span class="tag">3 / 45</span>
        <h2>ุงููุฏู ุงูุฃุณุงุณู: ุตูุฑุฉ ุนูููุงุช ููุญุฏุฉ COP</h2>
        <p>
          COP ุชุนูู ุฃู ูู ุงูุฌูุงุช ุชุฑู ููุณ ุงูุญูููุฉ ุงูููุฏุงููุฉ ุนูู ุงูุฎุฑูุทุฉ: ููุณ ุงูุจูุงูุงุชุ ููุณ ุงูุชุญุฏูุซุ ููุณ ุงููุคุดุฑุงุช.
        </p>
      </div>
    </section>

    <section class="step" data-step="s4">
      <div class="panel">
        <span class="tag">4 / 45</span>
        <h2>ูุทุงู ุงูุฏูุงุน ุงูุฅููููู (Regional Defense)</h2>
        <p>
          ูู ุงูุฃูุธูุฉ ุงูุญุฏูุซุฉ ูุชู ุชุญููู ุงูุฅูููู ูุดุจูุฉ ูุชุฑุงุจุทุฉ: ุงูุญุฏูุฏุ ุงููุถุงุฆู ุงูุจุญุฑูุฉุ ุฎุทูุท ุงูุทุงูุฉุ ูุงููุฌุงู ุงูุฌูู.
        </p>
      </div>
    </section>

    <section class="step" data-step="s5">
      <div class="panel">
        <span class="tag">5 / 45</span>
        <h2>ุทุจูุงุช ุงุณุชุฑุงุชูุฌูุฉ: ูุถุงุฆู ูููุฑุงุช ุจุญุฑูุฉ</h2>
        <p>
          GIS ูุณูุญ ุจุชุญููู ุงููุถุงุฆู ูุซู ุจุงุจ ุงูููุฏุจุ ูุฑูุฒุ ูููุงุฉ ุงูุณููุณ ูุฃููุง ููุงุท ุชุคุซุฑ ุนูู ุงูุฃูู ุงูุงูุชุตุงุฏู ูุงูุนุณูุฑู.
        </p>
      </div>
    </section>

    <section class="step" data-step="s6">
      <div class="panel">
        <span class="tag">6 / 45</span>
        <h2>ุงูููููู ุงูุฃูู: ุญูุงูุฉ ุงูููุดุขุช ุงูุญูููุฉ</h2>
        <p>
          ุงูููุดุขุช ุงูุญูููุฉ ุชุดูู ุงููุทุงุฑุงุชุ ุงูููุงูุฆุ ูุญุทุงุช ุงูุทุงูุฉุ ูุงููุฑุงูุฒ ุงูุญููููุฉ. GIS ูุญุฏุฏ ููุงุทู ุงูุญูุงูุฉ ุญูููุง.
        </p>
      </div>
    </section>

    <section class="step" data-step="s7">
      <div class="panel">
        <span class="tag">7 / 45</span>
        <h2>ุฅุถุงูุฉ ููุดุขุช ุญูููุฉ ูููุงุท Assets</h2>
        <p>
          ููุง ูุธูุฑ ููููู Asset Management: ูู ููุดุฃุฉ ููุง ูููุน + ุจูุงูุงุช ูุตููุฉ + ูุณุชูู ุฃููููุฉ + ุญุงูุฉ ุชุดุบูู.
        </p>
      </div>
    </section>

    <section class="step" data-step="s8">
      <div class="panel">
        <span class="tag">8 / 45</span>
        <h2>ุชุญููู Buffer: ููุงุทู ุงูุญูุงูุฉ ูุชุนุฏุฏุฉ ุงูุทุจูุงุช</h2>
        <p>
          ูุชู ุจูุงุก ูุทุงูุงุช ุฃูููุฉ ุญูู ุงูููุดุฃุฉ: ูุทุงู ูุฑุงูุจุฉุ ูุทุงู ุชูุชูุดุ ูุทุงู ุชุฏุฎู ุณุฑูุน.
        </p>
      </div>
    </section>

    <section class="step" data-step="s9">
      <div class="panel">
        <span class="tag">9 / 45</span>
        <h2>ูุฑุงูุจุฉ ุงูุญุฏูุฏ: Border Monitoring</h2>
        <p>
          ุงูุญุฏูุฏ ููุณุช ุฎุทุงู ููุท. GIS ูุญูููุง ููุธุงู: ูุนุงุจุฑุ ุทุฑูุ ููุงุทู ุฌุจููุฉุ ููุงุทู ูุฑุงุบ.
        </p>
      </div>
    </section>

    <section class="step" data-step="s10">
      <div class="panel">
        <span class="tag">10 / 45</span>
        <h2>ุชุญููู ุงูุชุถุงุฑูุณ (Terrain)</h2>
        <p>
          ุงูุชุถุงุฑูุณ ุชุญุฏุฏ ุณูููุฉ ุงูุญุฑูุฉุ ููุงุท ุงูุฑุตุฏุ ููุณุงุฑุงุช ุงูุฏูุฑูุงุช. ููุง ูุนุฑุถ ููููู ุงูุงูุญุฏุงุฑ ูุงูุงุฑุชูุงุน.
        </p>
      </div>
    </section>

    <section class="step" data-step="s11">
      <div class="panel">
        <span class="tag">11 / 45</span>
        <h2>ุชุญููู Viewshed (ุฎุท ุงูุฑุคูุฉ)</h2>
        <p>
          ูู ุฃูู ุงูุชุญูููุงุช: ุชุญุฏูุฏ ุงูููุงุทู ุงููุฑุฆูุฉ ูู ููุทุฉ ูุฑุงูุจุฉ ุฃู ุจุฑุฌ ุฑุงุฏุงุฑ.
        </p>
      </div>
    </section>

    <section class="step" data-step="s12">
      <div class="panel">
        <span class="tag">12 / 45</span>
        <h2>ููููู ุงูุฅูุฐุงุฑ ุงููุจูุฑ Early Warning</h2>
        <p>
          ุงูุฅูุฐุงุฑ ุงููุจูุฑ ูุนุชูุฏ ุนูู ุดุจูุฉ ุญุณุงุณุงุช/ุฑุงุฏุงุฑุงุช + ุชุญููู ููุงูู + ุชูุจูู ุชููุงุฆู ุนูุฏ ุชุบูุฑ ููุท ุงูุญุฑูุฉ.
        </p>
      </div>
    </section>

    <section class="step" data-step="s13">
      <div class="panel">
        <span class="tag">13 / 45</span>
        <h2>ุชูุซูู ููุงุท ูุฑุงูุจุฉ (Sensors)</h2>
        <p>
          ุชุธูุฑ ุนูู ุงูุฎุฑูุทุฉ ููุงุท ุฑุตุฏ ุงูุชุฑุงุถูุฉ ูุน ูุทุงู ุชุบุทูุฉ ุฏุงุฆุฑู ููุถุญ ููุฉ ุงููุฑุงูุจุฉ.
        </p>
      </div>
    </section>

    <section class="step" data-step="s14">
      <div class="panel">
        <span class="tag">14 / 45</span>
        <h2>ููููู ุงููุฎุงุทุฑ Risk Zones</h2>
        <p>
          ุงููุฎุงุทุฑ ูุฏ ุชููู ุฃูููุฉ ุฃู ุทุจูุนูุฉ. GIS ูุญูููุง ุฅูู ุทุจูุงุช ููุงููุฉ ูุงุจูุฉ ููุชุญููู.
        </p>
      </div>
    </section>

    <section class="step" data-step="s15">
      <div class="panel">
        <span class="tag">15 / 45</span>
        <h2>Heatmap: ุฎุฑูุทุฉ ูุซุงูุฉ ุงููุฎุงุทุฑ</h2>
        <p>
          ุจุฏู ุงูููุงุท ุงูุนุดูุงุฆูุฉุ ูุณุชุฎุฏู Heatmap ูููู ุฃูู ุชุชุฑูุฒ ุงููุฎุงุทุฑุ ูููู ุชูุชูู ุจูุฑูุฑ ุงูุฒูู.
        </p>
      </div>
    </section>

    <section class="step" data-step="s16">
      <div class="panel">
        <span class="tag">16 / 45</span>
        <h2>ุงูุฏูุงุน ุงูุฅููููู = ุดุจูุฉ ุฅูุฏุงุฏ</h2>
        <p>
          ูู ุงููุงูุน ุงูุฃูููุ ุงูููุฌุณุชูุงุช ูู ุงูุนููุฏ ุงูููุฑู: ุทุฑู ุงูุฅูุฏุงุฏุ ุงููููุฏุ ููุงุท ุงูุชุฎุฒููุ ุฎุทูุท ุงูููู.
        </p>
      </div>
    </section>

    <section class="step" data-step="s17">
      <div class="panel">
        <span class="tag">17 / 45</span>
        <h2>Network Analysis: ุชุญููู ุงููุณุงุฑุงุช</h2>
        <p>
          ุงููุธุงู ูุณุชุทูุน ุงูุชุฑุงุญ ุงููุณุงุฑ ุงูุฃูุซุฑ ุฃูุงูุงู ุฃู ุงูุฃุณุฑุน ุจูุงุกู ุนูู ุงููุฎุงุทุฑ ูุงูุญูุงุฌุฒ.
        </p>
      </div>
    </section>

    <section class="step" data-step="s18">
      <div class="panel">
        <span class="tag">18 / 45</span>
        <h2>ููุงุท ุงูุงุฎุชูุงู Chokepoints</h2>
        <p>
          GIS ูุญุฏุฏ ุงูุทุฑู ุงูุชู ุฅู ุชู ุฅุบูุงููุง ุชุชุนุทู ุงูุญุฑูุฉ ูู ูุงูู ุงูุฅูููู (ุฌุณุฑุ ููุฑ ุฌุจููุ ูุนุจุฑ).
        </p>
      </div>
    </section>

    <section class="step" data-step="s19">
      <div class="panel">
        <span class="tag">19 / 45</span>
        <h2>ุชูุฒูุน ุงูููุงุฑุฏ Resource Allocation</h2>
        <p>
          ุฃูู ูุฌุจ ุฃู ุชูุถุน ุงููุฎุงุฒู ุฃู ููุงุท ุงูุฏุนู ุจุญูุซ ุชูู ุงููุณุงูุฉ ูุชุฒุฏุงุฏ ููุงุกุฉ ุงูุงุณุชุฌุงุจุฉุ
        </p>
      </div>
    </section>

    <section class="step" data-step="s20">
      <div class="panel">
        <span class="tag">20 / 45</span>
        <h2>ุงูุงูุชูุงู ุฅูู ุณูุฑูุง (State-Level Analysis)</h2>
        <p>
          ุงูุขู ููุชูู ูู ุงููุณุชูู ุงูุฅููููู ุฅูู ูุณุชูู ุฏููุฉ ูุงุญุฏุฉ ูุฅุธูุงุฑ ููู ูุชู ุจูุงุก ุงูุชุญููู ุฎุทูุฉ ุจุฎุทูุฉ.
        </p>
      </div>
    </section>

    <section class="step" data-step="s21">
      <div class="panel">
        <span class="tag">21 / 45</span>
        <h2>ุชุตููู ุงูุทุจูุงุช: ููุดุขุช - ุทุฑู - ููุงุทู - ูุฑุงูุฒ</h2>
        <p>
          ูุฌุงุญ ุงููุธุงู ูุนุชูุฏ ุนูู ุชูุธูู ุงูุทุจูุงุช (Layer Management) ูุน ุฑููุฒ ูุงุถุญุฉ ูLegend ุฐูู.
        </p>
      </div>
    </section>

    <section class="step" data-step="s22">
      <div class="panel">
        <span class="tag">22 / 45</span>
        <h2>ุงูุฑุจุท ูุน ุงูุจูุงูุงุช ุงููุตููุฉ Attributes</h2>
        <p>
          ูู ููุทุฉ ุนูู ุงูุฎุฑูุทุฉ ูู ุณุฌู ูู ูุงุนุฏุฉ ุจูุงูุงุช: ุงูุงุณูุ ุงูููุนุ ุงูุญุงูุฉุ ุงูุฃููููุฉุ ุงูุชุญุฏูุซ.
        </p>
      </div>
    </section>

    <section class="step" data-step="s23">
      <div class="panel">
        <span class="tag">23 / 45</span>
        <h2>ููููู ุงูุนูููุงุช: Zones of Control</h2>
        <p>
          ุชูุณูู ุงูุฎุฑูุทุฉ ุฅูู ููุงุทู ุณูุทุฑุฉ ููุฑุงูุจุฉ ูุชุญุฏูุฏ ููุงุทู ุงูุชุฏุฎู ูุงููุณุคูููุงุช.
        </p>
      </div>
    </section>

    <section class="step" data-step="s24">
      <div class="panel">
        <span class="tag">24 / 45</span>
        <h2>ุชุญููู ุงูุชุฏุงุฎู Spatial Overlay</h2>
        <p>
          Overlay ูุนูู ุฏูุฌ ุทุจูุชูู ูุฅูุชุงุฌ ูุฑุงุฑ: (ุฎุทุฑ + ููุดุขุช) ุฃู (ุทุฑู + ููุงุทู ูุฑุงูุจุฉ).
        </p>
      </div>
    </section>

    <section class="step" data-step="s25">
      <div class="panel">
        <span class="tag">25 / 45</span>
        <h2>ุชุญุฏูุฏ ููุงุท ุฏุนู (Support Points)</h2>
        <p>
          ููุงุท ุงูุฏุนู ูุฏ ุชููู ุฅุณุนุงูุ ุชููููุ ุงุชุตุงูุงุช. ุงููุธุงู ูุถุนูุง ุถูู ุชูุฒูุน ููุงูู ููุทูู.
        </p>
      </div>
    </section>

    <section class="step" data-step="s26">
      <div class="panel">
        <span class="tag">26 / 45</span>
        <h2>Dashboards: ุชุญููู ุงูุฎุฑูุทุฉ ุฅูู ูุฑูุฒ ููุงุฏุฉ</h2>
        <p>
          Dashboard ูุนูู ุฃู ุงููุงุฆุฏ ูุฑู ุงูุฎุฑูุทุฉ + ุฃุฑูุงู + ูุฎุทุทุงุช + ุฅูุฐุงุฑุงุช ูู ุดุงุดุฉ ูุงุญุฏุฉ.
        </p>
      </div>
    </section>

    <section class="step" data-step="s27">
      <div class="panel">
        <span class="tag">27 / 45</span>
        <h2>ุงูุชุญููู ุงูุฅุญุตุงุฆู: ูุคุดุฑุงุช ุงูุชุบุทูุฉ ูุงูุฌุงูุฒูุฉ</h2>
        <p>
          ุงููุธุงู ููุชุฌ ูุคุดุฑุงุช ูุซู: ุนุฏุฏ ุงูุฃุตููุ ุนุฏุฏ ุงูููุงุท ุงูุญุฑุฌุฉุ ูุณุจุฉ ุงูุชุบุทูุฉุ ุนุฏุฏ ุงูุฅูุฐุงุฑุงุช.
        </p>
      </div>
    </section>

    <section class="step" data-step="s28">
      <div class="panel">
        <span class="tag">28 / 45</span>
        <h2>ุงูุชุญููู ุงูุฒููู (Temporal Analytics)</h2>
        <p>
          ูููุฉ GIS ููุณุช ูู ุงููููุน ููุทุ ุจู ูู ุงูุฒูู ุฃูุถุงู: ูุชู ุฒุงุฏุช ุงููุฎุงุทุฑุ ูุชู ุชุญุฑูุช ุงูุจูุงูุงุชุ
        </p>
      </div>
    </section>

    <section class="step" data-step="s29">
      <div class="panel">
        <span class="tag">29 / 45</span>
        <h2>ุชูุจูู ุชููุงุฆู ุนูุฏ ุชุบูุฑ ููุท ุงูุญุฑูุฉ</h2>
        <p>
          ูุฐุง ููููู ููู ูู ุงูุฃูุธูุฉ ุงูุญุฏูุซุฉ: Event-driven GIS ุญูุซ ุงูุชุบููุฑ ูููุฏ ุชูุจูู.
        </p>
      </div>
    </section>

    <section class="step" data-step="s30">
      <div class="panel">
        <span class="tag">30 / 45</span>
        <h2>ุงูุงูุชูุงู ุฅูู ูุฏููุฉ: ุญูุจ (Urban Tactical GIS)</h2>
        <p>
          ุงูุขู ููุชูู ุฅูู ูุณุชูู ุงููุฏููุฉ ูุฅุธูุงุฑ ููุฉ GIS ูู ุงูุนูููุงุช ุงูุญุถุฑูุฉุ ูุฅุฏุงุฑุฉ ุงูููุงุฑุฏ ุจุดูู ุฏููู.
        </p>
      </div>
    </section>

    <section class="step" data-step="s31">
      <div class="panel">
        <span class="tag">31 / 45</span>
        <h2>ุชุฌุฒุฆุฉ ุงููุฏููุฉ ุฅูู ูุทุงุนุงุช Sectors</h2>
        <p>
          ุชูุณูู ุงููุฏููุฉ ุฅูู ูุทุงุนุงุช ูุณูู ุฅุฏุงุฑุฉ ุงูุนูููุงุช ููููู ุฒูู ุงูุงุณุชุฌุงุจุฉ.
        </p>
      </div>
    </section>

    <section class="step" data-step="s32">
      <div class="panel">
        <span class="tag">32 / 45</span>
        <h2>ุชุญููู Service Area ุฏุงุฎู ุงููุฏููุฉ</h2>
        <p>
          ุชุญุฏูุฏ ุงูููุงุทู ุงูุชู ูููู ุงููุตูู ุฅูููุง ุฎูุงู 5 ุฏูุงุฆูุ 10 ุฏูุงุฆูุ 15 ุฏูููุฉ.
        </p>
      </div>
    </section>

    <section class="step" data-step="s33">
      <div class="panel">
        <span class="tag">33 / 45</span>
        <h2>ุชุญุฏูุฏ ููุดุขุช ุญุณุงุณุฉ ุฏุงุฎู ุงููุฏููุฉ</h2>
        <p>
          ููุดุขุช ูุซู ูุฑุงูุฒ ุงูุงุชุตุงูุงุชุ ุงููุณุชุดููุงุชุ ูุญุทุงุช ุงูุทุงูุฉ. ูุชู ุฅุนุทุงุคูุง ุฃููููุฉ ุนุงููุฉ.
        </p>
      </div>
    </section>

    <section class="step" data-step="s34">
      <div class="panel">
        <span class="tag">34 / 45</span>
        <h2>ุชุญููู ุงููุฎุงุทุฑ ุงูุญุถุฑู Urban Risk</h2>
        <p>
          ูุชู ุชุญููู ุงููุฏููุฉ ุฅูู ุฎุฑูุทุฉ ูุฎุงุทุฑ ุชุนุชูุฏ ุนูู ุงููุซุงูุฉ ุงูุณูุงููุฉุ ุงูุจููุฉ ุงูุชุญุชูุฉุ ูุณุฌู ุงูุฃุญุฏุงุซ.
        </p>
      </div>
    </section>

    <section class="step" data-step="s35">
      <div class="panel">
        <span class="tag">35 / 45</span>
        <h2>ุชุฎุทูุท ููุงุท ุงูุชุดุงุฑ (Monitoring Coverage)</h2>
        <p>
          ูุญุฏุฏ ููุงุท ูุฑุงูุจุฉ ููุฒุนุฉ ุจุญูุซ ุชูู ุงููุฑุงุบุงุช ูุชุฒุฏุงุฏ ุงููุฏุฑุฉ ุนูู ุงููุฑุงูุจุฉ ูุงูุชุญูู.
        </p>
      </div>
    </section>

    <section class="step" data-step="s36">
      <div class="panel">
        <span class="tag">36 / 45</span>
        <h2>ุนุฑุถ ุงูุจูุงูุงุช ุจุดูู ุฑูุฒู ูุงุถุญ (Symbology)</h2>
        <p>
          ุงูููู ูุงูุฑูุฒ ููุณุง ุฒููุฉ. ููุง ูุบุฉ. ุงููุธุงู ูุฌุจ ุฃู ูููู ูุงุถุญุงู ุญุชู ุชุญุช ุถุบุท ุงููุฑุงุฑ.
        </p>
      </div>
    </section>

    <section class="step" data-step="s37">
      <div class="panel">
        <span class="tag">37 / 45</span>
        <h2>ุฅุฏุงุฑุฉ ุงูุตูุงุญูุงุช (RBAC)</h2>
        <p>
          ููุณ ูู ูุณุชุฎุฏู ูุฑู ูู ุดูุก. GIS ุงูุฏูุงุนู ูุนุชูุฏ ุนูู ุตูุงุญูุงุช ุฏูููุฉ ุญุณุจ ุงูุฏูุฑ.
        </p>
      </div>
    </section>

    <section class="step" data-step="s38">
      <div class="panel">
        <span class="tag">38 / 45</span>
        <h2>ุฃูููุฉ ุงูุณุฌู ุงูุชุงุฑูุฎู Logs</h2>
        <p>
          ุงููุธุงู ูุณุฌู ูู ุชุบููุฑ: ูู ุฃุถุงูุ ูู ุนุฏููุ ูุชูุ ููุฐุง ููู ููุฃูู ูุงููุฑุงุฌุนุฉ ูุงูุชุญููู.
        </p>
      </div>
    </section>

    <section class="step" data-step="s39">
      <div class="panel">
        <span class="tag">39 / 45</span>
        <h2>ููุฉ ุงููุธุงู: ุชุญููู ุงูุจูุงูุงุช ุฅูู ูุฑุงุฑ</h2>
        <p>
          ุงูุฎุฑูุทุฉ + ุงูุชุญููู + ุงูุฅุญุตุงุฆูุงุช = ูุฑุงุฑ ุณุฑูุน ูุฏููู.
          ูุฐู ูู ุงููููุฉ ุงูุญููููุฉ ูุฃู ูุธุงู GIS ุฏูุงุนู.
        </p>
      </div>
    </section>

    <section class="step" data-step="s40">
      <div class="panel">
        <span class="tag">40 / 45</span>
        <h2>ููู ูุฏุนู ุงููุธุงู ูุฒุงุฑุฉ ุงูุฏูุงุนุ</h2>
        <p>
          ูุฒุงุฑุฉ ุงูุฏูุงุน ุชุญุชุงุฌ ููุตุฉ ุชุฌูุน ูู ุดูุก: ููุดุขุชุ ูุฑุงูุจุฉุ ููุฌุณุชูุงุชุ ุฌุงูุฒูุฉุ ุญุฏูุฏุ ุชูุงุฑูุฑุ ูDashboards.
        </p>
      </div>
    </section>

    <section class="step" data-step="s41">
      <div class="panel">
        <span class="tag">41 / 45</span>
        <h2>ุชูุงูู ุงููุธุงู ูุน ูุธู ุฃุฎุฑู</h2>
        <p>
          ูููู ุฑุจุทู ูุน ุฃูุธูุฉ ุงูุงุชุตุงูุงุชุ ุฃูุธูุฉ ุงูุจูุงุบุงุชุ ุฃูุธูุฉ ุงูููุงุฑุฏ ุงูุจุดุฑูุฉุ ูุฃูุธูุฉ ุงููุฑุงูุจุฉ.
        </p>
      </div>
    </section>

    <section class="step" data-step="s42">
      <div class="panel">
        <span class="tag">42 / 45</span>
        <h2>ูุงุจููุฉ ุงูุชูุณุน: ูู ูุฏููุฉ ุฅูู ุฏููุฉ ุฅูู ุฅูููู</h2>
        <p>
          ููุณ ุงููุธุงู ูููู ุชูุณูุนู ุจุณูููุฉ ุฅุฐุง ูุงู ูุจููุงู ุนูู ูุงุนุฏุฉ ุจูุงูุงุช GIS ุตุญูุญุฉ ููุนุงููุฑ ุทุจูุงุช ูุงุถุญุฉ.
        </p>
      </div>
    </section>

    <section class="step" data-step="s43">
      <div class="panel">
        <span class="tag">43 / 45</span>
        <h2>ุงูุชูุงุฑูุฑ ูุงูุชุญููู ุฅูู PDF</h2>
        <p>
          ุงููุธุงู ูุฌุจ ุฃู ููุชุฌ ุชูุงุฑูุฑ ุฑุณููุฉ: ุฎุฑุงุฆุท + ุฌุฏุงูู + ูุคุดุฑุงุช + ุชุญููู ูุฎุชุตุฑ ูุฏุนู ุงููุฑุงุฑ.
        </p>
      </div>
    </section>

    <section class="step" data-step="s44">
      <div class="panel">
        <span class="tag">44 / 45</span>
        <h2>ุงูููุฎุต ุงูููุงุฆู</h2>
        <p>
          ูุฐุง ุงููุดุฑูุน ูุซุจุช ุฃู GIS ููุณ ุจุฑูุงูุฌ ุฎุฑุงุฆุทุ ุจู ูุธุงู ููุงุฏุฉ ูุชุญููู ูุงุชุฎุงุฐ ูุฑุงุฑ.
        </p>
        <div class="highlight">
          GIS ุงูุฏูุงุนู = ุจูุงูุงุช + ุชุญูููุงุช + ูุฑุงูุจุฉ + Dashboards + ุชูุงุฑูุฑ + ุตูุงุญูุงุช.
        </div>
      </div>
    </section>

    <section class="step" data-step="s45">
      <div class="panel">
        <span class="tag">45 / 45</span>
        <h2>ุงูููุงูุฉ: ุนุฑุถ ุงููุดุฑูุน ุงูุญูููู</h2>
        <p>
          ุงูุขู ุจุนุฏ ููู ูู ููุฑุฉุ ูููู ุงุณุชุนุฑุงุถ ุงููููุน ุงูุญูููู ูุจุงุดุฑุฉ:
          <br />
          <b>Military Operations System</b>
          <br />
          ูุชุญููู ููู ูููู ุชุญูููู ุฅูู ููุตุฉ ุฌุงูุฒุฉ ููุงุณุชุฎุฏุงู ุงููุคุณุณู.
        </p>
        <div class="highlight">
          ุฑุงุจุท ุงููุดุฑูุน: yasseralmofaalani.github.io/military-operations-system
        </div>
      </div>
    </section>

  </main>

  <div class="story-nav">
    <button id="prevBtn" class="nav-btn" disabled>ุงูุณุงุจู</button>
    <button id="nextBtn" class="nav-btn">ุงูุชุงูู</button>
  </div>

  <audio id="stepSound"
    src="https://assets.mixkit.co/sfx/preview/mixkit-interface-click-1126.mp3"
    preload="auto"></audio>

  <script type="module">
    import L from "https://esm.sh/leaflet";
    import * as turf from "https://esm.sh/@turf/turf";

    const map = L.map("map", {
      zoomControl: false,
      scrollWheelZoom: false,
      dragging: false,
      attributionControl: false,
    }).setView([32.0, 44.0], 5);

      L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager_nolabels/{z}/{x}/{y}{r}.png').addTo(map);
    L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager_only_labels/{z}/{x}/{y}{r}.png', { zIndex: 1000 }).addTo(map);

    const layerGroup = L.layerGroup().addTo(map);

    const spotlight = document.getElementById("spotlight");
    const stepSound = document.getElementById("stepSound");

    const tooltipTitle = document.getElementById("tooltipTitle");
    const tooltipText = document.getElementById("tooltipText");

    const legendTitle = document.getElementById("legendTitle");
    const legendItems = document.getElementById("legendItems");

    const infoCard = document.getElementById("infoCard");
    const infoText = document.getElementById("infoText");

    const progressFill = document.getElementById("progressFill");
    const stepIndicator = document.getElementById("stepIndicator");

    function playSound() {
      stepSound.currentTime = 0;
      stepSound.volume = 0.25;
      stepSound.play().catch(() => { });
    }

    function setTooltip(title, text) {
      tooltipTitle.textContent = title;
      tooltipText.textContent = text;
    }

    function setLegend(title, items) {
      legendTitle.textContent = title;
      legendItems.innerHTML = "";
      items.forEach(it => {
        const div = document.createElement("div");
        div.className = "legend-item";
        div.innerHTML = `<span class="legend-dot" style="background:${it.color}"></span> ${it.label}`;
        legendItems.appendChild(div);
      });
    }

    function setInfo(text) {
      if (!text) {
        infoCard.classList.remove("active");
        return;
      }
      infoText.textContent = text;
      infoCard.classList.add("active");
    }

    function clearLayers() {
      layerGroup.clearLayers();
    }

    function addMarker(latlng, cls, label) {
      const icon = L.divIcon({
        className: "",
        html: `<div class="unit-icon ${cls} pulse">${label}</div>`,
        iconSize: [28, 28],
        iconAnchor: [14, 14],
      });
      return L.marker(latlng, { icon }).addTo(layerGroup);
    }

    function addBuffer(latlng, radius, color, dash = false) {
      return L.circle(latlng, {
        radius,
        color,
        fillColor: color,
        fillOpacity: 0.12,
        weight: 2,
        dashArray: dash ? "8,8" : null,
      }).addTo(layerGroup);
    }

    function addRoute(coords, color) {
      return L.polyline(coords, { color, weight: 5, opacity: 0.9 }).addTo(layerGroup);
    }

    function addHeat(center, count = 10) {
      for (let i = 0; i < count; i++) {
        const lat = center[0] + (Math.random() * 1.2 - 0.6);
        const lng = center[1] + (Math.random() * 1.2 - 0.6);
        L.circle([lat, lng], {
          radius: 25000 + Math.random() * 35000,
          color: "#ff4d4d",
          weight: 0,
          fillOpacity: 0.12,
        }).addTo(layerGroup);
      }
    }

    function enableSpotlight(active) {
      spotlight.classList.toggle("active", active);
    }

    // MAIN COORDINATES
    const middleEastCenter = [30.5, 42.5];
    const syriaCenter = [35.0, 38.5];
    const aleppo = [36.2021, 37.1343];
    const damascus = [33.5138, 36.2765];

    // Example strategic points
    const suez = [30.0444, 32.5322];
    const hormuz = [26.5667, 56.2500];
    const babAlMandab = [12.65, 43.35];

    const steps = document.querySelectorAll(".step");
    const order = Array.from(steps).map(s => s.dataset.step);

    let currentIndex = 0;

    function updateProgress() {
      const percent = ((currentIndex + 1) / order.length) * 100;
      progressFill.style.width = percent + "%";
      stepIndicator.textContent = `${currentIndex + 1} / ${order.length}`;
      document.getElementById("prevBtn").disabled = currentIndex === 0;
      document.getElementById("nextBtn").disabled = currentIndex === order.length - 1;
    }

    const actions = {

      s1: () => {
        clearLayers();
        enableSpotlight(false);
        map.flyTo(middleEastCenter, 5, { duration: 2 });
        setTooltip("ุงูุจุฏุงูุฉ", "ูุจุฏุฃ ูู ุงูุดุฑู ุงูุฃูุณุท ูุชูุถูุญ ููููู ุงูุฏูุงุน ุงูุฅููููู ูุงูุชุญููู ูุชุนุฏุฏ ุงููุณุชููุงุช.");
        setLegend("ุทุจูุงุช ุนุงูุฉ", [
          { color: "#00d4ff", label: "ูุฑุงูุฒ ููุงุฏุฉ" },
          { color: "#f1c40f", label: "ููุดุขุช ุญูููุฉ" },
          { color: "#ff4d4d", label: "ูุฎุงุทุฑ" }
        ]);
        setInfo("GIS ูู ุงูุฏูุงุน = ููุตุฉ ูุฑุงุฑ ูููุณุช ูุฌุฑุฏ ุฎุฑูุทุฉ.");
      },

      s2: () => {
        clearLayers();
        addMarker([31.95, 35.91], "friendly", "HQ");
        addMarker([24.71, 46.67], "friendly", "HQ");
        addMarker([33.89, 35.50], "friendly", "HQ");
        map.flyTo(middleEastCenter, 5, { duration: 1.6 });
        setTooltip("Architecture", "ุงููุธุงู ุนุจุงุฑุฉ ุนู ููุตุฉ: ุจูุงูุงุช + ุทุจูุงุช + ุชุญููู + ุนุฑุถ + ูุฑุงุฑ.");
        setInfo("ุงูุฃูุธูุฉ ุงูุญุฏูุซุฉ ุชุนุชูุฏ ุนูู GIS ูู Operating Platform.");
      },

      s3: () => {
        clearLayers();
        addMarker([33.31, 44.36], "friendly", "COP");
        addBuffer([33.31, 44.36], 250000, "#00d4ff");
        map.flyTo([33.31, 44.36], 6, { duration: 1.4 });
        setTooltip("COP", "ุตูุฑุฉ ุนูููุงุช ููุญุฏุฉ: ุงูุฌููุน ูุฑู ููุณ ุงูุฎุฑูุทุฉ ูููุณ ุงูุจูุงูุงุช ูู ุงูุฒูู ุงูุญูููู.");
        setInfo("COP ุชููู ุถุจุงุจ ุงูุญุฑุจ ูุชุฒูุฏ ุฏูุฉ ุงููุฑุงุฑ.");
      },

      s4: () => {
        clearLayers();
        enableSpotlight(true);
        map.flyTo(middleEastCenter, 5, { duration: 1.8 });
        setTooltip("Regional Defense", "ุชุญููู ุงูุฏูุงุน ุงูุฅููููู ูุจุฏุฃ ุจููู ุดุจูุงุช ุงูุญุฑูุฉ ูุงูุทุงูุฉ ูุงููุฌุงู ุงูุจุญุฑู.");
        setLegend("ูุณุชูู ุงูุฅูููู", [
          { color: "#2ecc71", label: "ุดุจูุงุช ุทุฑู" },
          { color: "#00d4ff", label: "ูุฑุงูุฒ ูุฑุงุฑ" }
        ]);
        setInfo(null);
      },

      s5: () => {
        clearLayers();
        enableSpotlight(true);

        addMarker(suez, "critical", "SEA");
        addMarker(hormuz, "critical", "SEA");
        addMarker(babAlMandab, "critical", "SEA");

        addBuffer(suez, 120000, "#f1c40f", true);
        addBuffer(hormuz, 120000, "#f1c40f", true);
        addBuffer(babAlMandab, 120000, "#f1c40f", true);

        map.flyTo([22.5, 45.0], 5, { duration: 1.7 });
        setTooltip("Sea Chokepoints", "ุงููุถุงุฆู ุงูุจุญุฑูุฉ ุชูุซู ููุงุท ุงุณุชุฑุงุชูุฌูุฉ ุญุณุงุณุฉ ุชุคุซุฑ ุนูู ุงูุฃูู ูุงูุงูุชุตุงุฏ.");
        setLegend("ููุฑุงุช ุจุญุฑูุฉ", [
          { color: "#f1c40f", label: "ูุถูู ุงุณุชุฑุงุชูุฌู" }
        ]);
        setInfo("ุชุญููู ุงููุถุงุฆู ูุซุงู ููุชุงุฒ ุนูู GIS ูู ุงูุฃูู ุงูุฅููููู.");
      },

      s6: () => {
        clearLayers();
        enableSpotlight(false);

        addMarker([29.37, 47.98], "critical", "P");
        addMarker([25.20, 55.27], "critical", "P");
        addMarker([31.23, 29.95], "critical", "P");

        map.flyTo([27.5, 48.5], 5, { duration: 1.6 });
        setTooltip("Critical Infrastructure", "ุงูููุดุขุช ุงูุญูููุฉ ููุง ุฃููููุฉ ูุตูู ูู ุฃูุธูุฉ GIS ุงูุฏูุงุนูุฉ.");
        setLegend("Assets", [
          { color: "#f39c12", label: "ููุดุฃุฉ ุญูููุฉ" }
        ]);
        setInfo("ุฃู ููุดุฃุฉ ุญูููุฉ ุชุญุชุงุฌ: ูููุน + ุญุงูุฉ + ุฃููููุฉ + ุทุจูุงุช ุญูุงูุฉ.");
      },

      s7: () => {
        clearLayers();
        addMarker([33.31, 44.36], "critical", "A1");
        addMarker([32.08, 34.78], "critical", "A2");
        addMarker([24.71, 46.67], "critical", "A3");
        map.flyTo(middleEastCenter, 5, { duration: 1.3 });

        setTooltip("Asset Layer", "ุทุจูุฉ ุงูุฃุตูู ูู ููุจ ุงููุธุงู: ุชูุซูู ุงูููุงูุน ุงูุญุฑุฌุฉ ูููุงุท ุฐููุฉ.");
        setLegend("ุฃุตูู", [
          { color: "#f39c12", label: "Asset ููุทุฉ ุญุฑุฌุฉ" }
        ]);
        setInfo("ูู ููุทุฉ ููุง Attribute Table ูููู ุฑุจุทู ุจููุญุงุช ุงูุฅุญุตุงุก.");
      },

      s8: () => {
        clearLayers();
        const asset = [33.31, 44.36];
        addMarker(asset, "critical", "A");
        addBuffer(asset, 80000, "#f1c40f");
        addBuffer(asset, 160000, "#00d4ff", true);

        map.flyTo(asset, 7, { duration: 1.5 });
        setTooltip("Buffer Zones", "ุจูุงุก ูุทุงูุงุช ุญูุงูุฉ ูุชุนุฏุฏุฉ ุงููุณุชููุงุช ุญูู ููุดุฃุฉ ุญุณุงุณุฉ.");
        setLegend("ูุทุงูุงุช", [
          { color: "#f1c40f", label: "ูุทุงู ุญูุงูุฉ ูุฑูุจ" },
          { color: "#00d4ff", label: "ูุทุงู ูุฑุงูุจุฉ ุฃูุณุน" }
        ]);
        setInfo("Buffer Analysis ูู ุฃูุซุฑ ุงูุชุญูููุงุช ุงุณุชุฎุฏุงูุงู ูู ุงูุฃูู.");
      },

      s9: () => {
        clearLayers();
        enableSpotlight(true);

        const borderLine = [
          [36.0, 37.0],
          [36.4, 38.0],
          [36.6, 39.0],
          [36.9, 40.0],
        ];
        L.polyline(borderLine, { color: "#00d4ff", weight: 5, dashArray: "10,8" }).addTo(layerGroup);

        map.flyTo([36.5, 39.0], 7, { duration: 1.5 });
        setTooltip("Border Monitoring", "ุงูุญุฏูุฏ ุชุญุชุงุฌ ูุฑุงูุจุฉ ูุณุชูุฑุฉ: ูุนุงุจุฑ + ุชุถุงุฑูุณ + ููุงุทู ูุฑุงุบ.");
        setLegend("ุญุฏูุฏ", [
          { color: "#00d4ff", label: "ุญุฏูุฏ ูุฑุงูุจุฉ" }
        ]);
        setInfo("ุงูุญุฏูุฏ ููุณุช ุฎุทุงูโฆ ุจู ูุธุงู ูุฑุงูุจุฉ ูุชูุงูู.");
      },

      s10: () => {
        clearLayers();
        enableSpotlight(false);

        addHeat([34.5, 39.0], 12);
        map.flyTo(syriaCenter, 6, { duration: 1.7 });

        setTooltip("Terrain Factors", "ุงูุชุถุงุฑูุณ ุชุคุซุฑ ุนูู ุงูุญุฑูุฉุ ุงูุฑุคูุฉุ ูุงููุณุงุฑุงุช ุงูููุฌุณุชูุฉ.");
        setLegend("ุชุถุงุฑูุณ", [
          { color: "#ff4d4d", label: "ููุงุทู ุตุนุจุฉ ุงูุญุฑูุฉ (ูุญุงูุงุฉ)" }
        ]);
        setInfo("ุงูุงูุญุฏุงุฑ ูุงูุงุฑุชูุงุน ุนูุตุฑุงู ุฃุณุงุณูุงู ูู ุงูุชุญููู ุงูุฏูุงุนู.");
      },

      s11: () => {
        clearLayers();
        const obs = damascus;
        addMarker(obs, "friendly", "OBS");
        const wedge = [];

        const p1 = turf.point([obs[1], obs[0]]);
        for (let a = 20; a <= 160; a += 8) {
          const dest = turf.destination(p1, 18, a, { units: "kilometers" });
          wedge.push([dest.geometry.coordinates[1], dest.geometry.coordinates[0]]);
        }

        L.polygon([obs, ...wedge], { color: "#2ecc71", fillOpacity: 0.18, weight: 1 }).addTo(layerGroup);
        map.flyTo(obs, 10, { duration: 1.6 });

        setTooltip("Viewshed", "ูุญุงูุงุฉ ุฎุท ุฑุคูุฉ ูู ููุทุฉ ูุฑุงูุจุฉ ูุชุญุฏูุฏ ุงูููุงุทู ุงููุฑุฆูุฉ.");
        setLegend("Viewshed", [
          { color: "#2ecc71", label: "ููุทูุฉ ูุฑุฆูุฉ" }
        ]);
        setInfo("Viewshed ูุณุชุฎุฏู ูุงุฎุชูุงุฑ ููุงูุน ุงููุฑุงูุจุฉ ูุงูุฑุงุฏุงุฑุงุช.");
      },

      s12: () => {
        clearLayers();
        enableSpotlight(true);
        map.flyTo(syriaCenter, 6, { duration: 1.4 });

        setTooltip("Early Warning", "ุงูุฅูุฐุงุฑ ุงููุจูุฑ ูุนุชูุฏ ุนูู ุญุณุงุณุงุช + ุชุบุทูุฉ + ุชุญููู ููุงูู + ุชูุจููุงุช.");
        setLegend("Early Warning", [
          { color: "#00d4ff", label: "ุญุณุงุณุงุช / ุฑุงุฏุงุฑุงุช" }
        ]);
        setInfo("Early Warning ูุง ูุนูู ุจุฏูู GIS ูุฃูู ูุนุชูุฏ ุนูู ุงูููุงู.");
      },

      s13: () => {
        clearLayers();

        const sensors = [
          [35.4, 38.8],
          [34.8, 37.2],
          [36.2, 40.1],
          [33.9, 38.9],
        ];

        sensors.forEach((s, i) => {
          addMarker(s, "friendly", "R" + (i + 1));
          addBuffer(s, 90000, "#00d4ff", true);
        });

        map.flyTo([35.3, 38.5], 7, { duration: 1.5 });

        setTooltip("Sensor Coverage", "ุนุฑุถ ุชุบุทูุฉ ุงูุฑุงุฏุงุฑุงุช/ุงูุญุณุงุณุงุช ููุทุงูุงุช ุฏุงุฆุฑูุฉ.");
        setLegend("Sensors", [
          { color: "#00d4ff", label: "ูุทุงู ุชุบุทูุฉ ุฑุงุฏุงุฑ" }
        ]);
        setInfo("ุชุฏุงุฎู ุงูุชุบุทูุงุช ูุนูู ููุฉ ูุฑุงูุจุฉ ุฃุนูู.");
      },

      s14: () => {
        clearLayers();
        enableSpotlight(false);

        addHeat([35.1, 39.2], 14);
        map.flyTo([35.2, 39.0], 7, { duration: 1.5 });

        setTooltip("Risk Zones", "ุชุญููู ุงููุฎุงุทุฑ ุฅูู ุทุจูุฉ ุชุญููููุฉ: Hotspots, Buffers, Density.");
        setLegend("Risks", [
          { color: "#ff4d4d", label: "ููุทูุฉ ุฎุทุฑ" }
        ]);
        setInfo("ุงููุฎุงุทุฑ ูููู ุฃู ุชููู: ุฃูููุฉุ ุทุจูุนูุฉุ ุฃู ููุฌุณุชูุฉ.");
      },

      s15: () => {
        clearLayers();
        enableSpotlight(true);

        addHeat([35.1, 39.2], 18);
        map.flyTo([35.0, 39.3], 8, { duration: 1.6 });

        setTooltip("Heatmap", "Heatmap ุชุณุงุนุฏ ุงููุงุฆุฏ ุนูู ุฑุคูุฉ ุงูููุท ุจุฏู ูุฑุงุกุฉ ูุฆุงุช ุงูููุงุท.");
        setLegend("Heatmap", [
          { color: "#ff4d4d", label: "ูุซุงูุฉ ูุดุงุท ูุฑุชูุนุฉ" }
        ]);
        setInfo("Heatmap = Kernel Density Visualization.");
      },

      s16: () => {
        clearLayers();
        enableSpotlight(false);

        addMarker([34.8, 38.2], "critical", "S");
        addMarker([35.3, 37.7], "critical", "S");
        addMarker([35.7, 39.4], "critical", "S");

        map.flyTo([35.2, 38.4], 7, { duration: 1.6 });

        setTooltip("Logistics Network", "ุงูุฏูุงุน ุงูุฅููููู ูุนุชูุฏ ุนูู ุดุจูุฉ ุฏุนู: ูุฎุงุฒูุ ูููุฏุ ููุงุท ุชูููู.");
        setLegend("Logistics", [
          { color: "#f39c12", label: "ููุทุฉ ุฏุนู" }
        ]);
        setInfo("ุงูููุฌุณุชูุงุช ุนูุตุฑ ุงุณุชุฑุงุชูุฌู ุฃูู ูู ุงูุณูุงุญ ููุณู.");
      },

      s17: () => {
        clearLayers();
        enableSpotlight(true);

        const route = [
          [34.5, 37.0],
          [35.0, 38.0],
          [35.4, 39.0],
          [35.8, 40.2],
        ];

        addRoute(route, "#00d4ff");
        addMarker(route[0], "friendly", "D1");
        addMarker(route[3], "friendly", "D2");

        map.flyTo([35.2, 38.8], 7, { duration: 1.5 });

        setTooltip("Route Planning", "Network Analysis ูุญุฏุฏ ุฃูุถู ุทุฑูู ุขูู/ุณุฑูุน ูููู ุงูุฅูุฏุงุฏุงุช.");
        setLegend("Routes", [
          { color: "#00d4ff", label: "ูุณุงุฑ ุฅูุฏุงุฏ" }
        ]);
        setInfo("ุงููุณุงุฑ ูููู ุฃู ูุชุบูุฑ ุญุณุจ ุงููุฎุงุทุฑ.");
      },

      s18: () => {
        clearLayers();
        enableSpotlight(true);

        addRoute([[34.7, 38.1], [35.0, 38.5], [35.4, 39.0]], "#2ecc71");
        addMarker([35.0, 38.5], "risk", "X");

        addBuffer([35.0, 38.5], 50000, "#ff4d4d", true);

        map.flyTo([35.0, 38.5], 9, { duration: 1.5 });

        setTooltip("Chokepoint", "ููุทุฉ ุงุฎุชูุงู: ุฅุฐุง ุชุนุทูุช ูุฐู ุงูููุทุฉ ุชุชุนุทู ุญุฑูุฉ ุงูุฅูุฏุงุฏ.");
        setLegend("Chokepoints", [
          { color: "#ff4d4d", label: "ููุทุฉ ุงุฎุชูุงู" }
        ]);
        setInfo("ุชุญููู Chokepoints ุฌุฒุก ุฃุณุงุณู ูู ุงูุชุฎุทูุท.");
      },

      s19: () => {
        clearLayers();
        enableSpotlight(false);

        const support = [35.1, 38.6];
        addMarker(support, "critical", "SUP");
        addBuffer(support, 110000, "#2ecc71");

        map.flyTo(support, 8, { duration: 1.5 });

        setTooltip("Resource Allocation", "ุชุญุฏูุฏ ููุงูุน ุงูุฏุนู ุจุญูุซ ุชุบุทู ุฃูุจุฑ ูุณุงุญุฉ ุจุฃูู ุชูููุฉ.");
        setLegend("Support", [
          { color: "#2ecc71", label: "ุชุบุทูุฉ ุฏุนู" }
        ]);
        setInfo("ูุฐู ุฎุทูุฉ ุชุดุจู Location-Allocation ูู GIS.");
      },

      s20: () => {
        clearLayers();
        enableSpotlight(false);
        map.flyTo(syriaCenter, 6, { duration: 1.8 });

        setTooltip("Zoom to Syria", "ููุชูู ุฅูู ูุณุชูู ุณูุฑูุง ูุชุญููู ุงูุจูุงูุงุช ุนูู ูุณุชูู ุงูุฏููุฉ.");
        setLegend("State Level", [
          { color: "#00d4ff", label: "ูุณุชูู ุงูุฏููุฉ" }
        ]);
        setInfo("ุงูุชุฏุฑุฌ ุงูุฌุบุฑุงูู ููู: ุฅูููู โ ุฏููุฉ โ ูุฏููุฉ.");
      },

      s21: () => {
        clearLayers();
        addMarker([35.5, 38.6], "friendly", "HQ");
        addMarker([34.7, 37.3], "critical", "A");
        addMarker([36.0, 40.0], "risk", "R");

        map.flyTo([35.3, 38.6], 7, { duration: 1.5 });

        setTooltip("Layer Management", "ุงูุทุจูุงุช ูุฌุจ ุฃู ุชููู ููุธูุฉ ููุตููุฉ ูุชุณููู ุงูุชุญูู ูุงูุชุตููุฉ.");
        setLegend("Layers", [
          { color: "#00d4ff", label: "ูุฑูุฒ ููุงุฏุฉ" },
          { color: "#f39c12", label: "ุฃุตู ุญููู" },
          { color: "#ff4d4d", label: "ูุฎุงุทุฑ" }
        ]);
        setInfo("ArcGIS / WebGIS ูุนุชูุฏ ุนูู ููููู Layer Control.");
      },

      s22: () => {
        clearLayers();
        addMarker([35.2, 38.9], "friendly", "DB");
        map.flyTo([35.2, 38.9], 8, { duration: 1.5 });

        setTooltip("Attributes", "ูู ุนูุตุฑ ุนูู ุงูุฎุฑูุทุฉ ูุฑุชุจุท ุจุจูุงูุงุช ูุตููุฉ ูููู ุชุญููููุง ูุนุฑุถูุง.");
        setLegend("Attributes", [
          { color: "#00d4ff", label: "Feature + Attribute Table" }
        ]);
        setInfo("ุงูููุฒุฉ ุงูุฃูู ูู GIS: ุงูุจูุงูุงุช ุงููุตููุฉ ูุฑุชุจุทุฉ ุจุงูููุงู.");
      },

      s23: () => {
        clearLayers();
        enableSpotlight(true);

        L.polygon([[34.6, 37.2], [35.6, 37.2], [35.6, 38.7], [34.6, 38.7]], {
          color: "#f1c40f",
          fillOpacity: 0.08,
          weight: 2,
          dashArray: "10,6"
        }).addTo(layerGroup);

        map.flyTo([35.1, 38.0], 8, { duration: 1.5 });

        setTooltip("Zones of Control", "ุชูุณูู ุงูููุงุทู ูุชุญุฏูุฏ ูุณุคูููุงุช ูุฅุฏุงุฑุฉ ุงูุชุฏุฎู.");
        setLegend("Zones", [
          { color: "#f1c40f", label: "ููุทูุฉ ุนูููุงุช" }
        ]);
        setInfo("ุงูููุทูุฉ = AOI ุฃู Sector ุฃู Operational Zone.");
      },

      s24: () => {
        clearLayers();
        enableSpotlight(false);

        addHeat([35.0, 38.1], 10);
        addMarker([35.2, 38.3], "critical", "A");

        map.flyTo([35.1, 38.2], 9, { duration: 1.5 });

        setTooltip("Spatial Overlay", "Overlay ูุญุฏุฏ ุฃูู ุชุชูุงุทุน ุงููุฎุงุทุฑ ูุน ุงูุฃุตูู.");
        setLegend("Overlay", [
          { color: "#ff4d4d", label: "ุฎุทุฑ" },
          { color: "#f39c12", label: "ุฃุตู" }
        ]);
        setInfo("Overlay ูุฎุฑุฌ ุจูุฑุงุฑ: ุฃู ุงูุฃุตูู ุถูู ุงูุฎุทุฑุ");
      },

      s25: () => {
        clearLayers();
        enableSpotlight(false);

        const points = [
          [35.4, 38.1],
          [35.2, 37.7],
          [35.0, 38.5],
          [34.8, 38.0]
        ];

        points.forEach((p, i) => addMarker(p, "critical", "S" + (i + 1)));

        map.flyTo([35.1, 38.0], 9, { duration: 1.5 });

        setTooltip("Support Points", "ููุงุท ุงูุฏุนู ุชูุฒุน ูุชูููู ุฒูู ุงูุงุณุชุฌุงุจุฉ ูุชุบุทูุฉ ุงููุทุงุนุงุช.");
        setLegend("Support", [
          { color: "#f39c12", label: "ููุทุฉ ุฏุนู" }
        ]);
        setInfo("ุชูุฒูุน ุงูุฏุนู ูุนุชูุฏ ุนูู ุงููุซุงูุฉ ูุงููุฎุงุทุฑ.");
      },

      s26: () => {
        clearLayers();
        enableSpotlight(true);

        addMarker([35.2, 38.3], "friendly", "D");
        addBuffer([35.2, 38.3], 140000, "#00d4ff");

        map.flyTo([35.2, 38.3], 8, { duration: 1.4 });

        setTooltip("Dashboard Concept", "ุงูู Dashboard ูุญูู ุงูุฎุฑูุทุฉ ุฅูู ุบุฑูุฉ ุนูููุงุช ุฑูููุฉ.");
        setLegend("Dashboard", [
          { color: "#00d4ff", label: "ูุฑูุฒ ููุงุฏุฉ" }
        ]);
        setInfo("Dashboards ุชุฑุจุท ุงูุฎุฑูุทุฉ ุจุงูุฃุฑูุงู ูุจุงุดุฑุฉ.");
      },

      s27: () => {
        clearLayers();
        enableSpotlight(false);

        addMarker([35.2, 38.3], "friendly", "KPI");
        map.flyTo([35.2, 38.3], 8, { duration: 1.4 });

        setTooltip("KPIs", "ูุคุดุฑุงุช ูุซู: ุนุฏุฏ ุงูุฃุตููุ ุนุฏุฏ ุงูููุงุทู ุงูุญุฑุฌุฉุ ูุณุจุฉ ุงูุชุบุทูุฉ.");
        setLegend("KPIs", [
          { color: "#2ecc71", label: "ูุคุดุฑ ุฌุงูุฒูุฉ" }
        ]);
        setInfo("ุจุฏูู ูุคุดุฑุงุชโฆ ุงูุฎุฑูุทุฉ ุชุจูู ุดูู ููุท.");
      },

      s28: () => {
        clearLayers();
        enableSpotlight(false);

        addRoute([[35.2, 37.6], [35.3, 38.2], [35.5, 39.0]], "#f1c40f");
        map.flyTo([35.4, 38.5], 8, { duration: 1.4 });

        setTooltip("Temporal Analytics", "ุชุญููู ุงูุญุฑูุฉ ุนุจุฑ ุงูุฒูู ูุนุทู ุฑุคูุฉ ุงุณุชุจุงููุฉ.");
        setLegend("Temporal", [
          { color: "#f1c40f", label: "ูุณุงุฑ ุฒููู" }
        ]);
        setInfo("ุชุญููู ุงูุฒูู = ุงููุฑู ุจูู ุงููุฑุงูุจุฉ ูุงูุชูุจุค.");
      },

      s29: () => {
        clearLayers();
        enableSpotlight(true);

        addMarker([35.4, 38.8], "risk", "ALERT");
        addBuffer([35.4, 38.8], 90000, "#ff4d4d");

        map.flyTo([35.4, 38.8], 9, { duration: 1.5 });

        setTooltip("Alerts", "ุงูุชุญูู ุงูุญูููู: ุงููุธุงู ูุฑุณู ุชูุจูู ุชููุงุฆู ุนูุฏ ุชุบูุฑ ุงูููุท.");
        setLegend("Alerts", [
          { color: "#ff4d4d", label: "ุชูุจูู" }
        ]);
        setInfo("Event-driven GIS = GIS ูุนุชูุฏ ุนูู ุงูุญุฏุซ.");
      },

      s30: () => {
        clearLayers();
        enableSpotlight(false);

        map.flyTo(aleppo, 11, { duration: 2 });

        setTooltip("Zoom to Aleppo", "ููุชูู ุฅูู ูุณุชูู ุงููุฏููุฉ ูุชูุถูุญ ุงูุชุญููู ุงูุญุถุฑู ุงูุฏููู.");
        setLegend("Urban GIS", [
          { color: "#00d4ff", label: "ุชุญููู ุญุถุฑู" }
        ]);
        setInfo("ุงููุฏููุฉ = ุฃุนูู ูุซุงูุฉ ุจูุงูุงุช ูุฃุนูู ุชุนููุฏ.");
      },

      s31: () => {
        clearLayers();
        enableSpotlight(true);

        const sector = [
          [36.17, 37.05],
          [36.27, 37.05],
          [36.27, 37.20],
          [36.17, 37.20]
        ];

        L.polygon(sector, {
          color: "#f1c40f",
          fillOpacity: 0.08,
          weight: 2
        }).addTo(layerGroup);

        map.flyTo([36.22, 37.13], 12, { duration: 1.5 });

        setTooltip("Sectors", "ุชูุณูู ุงููุฏููุฉ ุฅูู ูุทุงุนุงุช ูุณูู ุงูุชุฎุทูุท ูุงูุฅุฏุงุฑุฉ.");
        setLegend("Sectors", [
          { color: "#f1c40f", label: "ูุทุงุน ุนูููุงุช" }
        ]);
        setInfo("Sectors ุชุณุชุฎุฏู ูู ุงูุดุฑุทุฉ ูุงูุฏูุงุน ุงููุฏูู ุฃูุถุงู.");
      },

      s32: () => {
        clearLayers();
        enableSpotlight(false);

        addMarker(aleppo, "friendly", "BASE");
        addBuffer(aleppo, 2500, "#2ecc71");
        addBuffer(aleppo, 5000, "#00d4ff", true);

        map.flyTo(aleppo, 13, { duration: 1.4 });

        setTooltip("Service Area", "ูุทุงูุงุช ุฒูู ุงูุงุณุชุฌุงุจุฉ ุฏุงุฎู ุงููุฏููุฉ.");
        setLegend("Service Area", [
          { color: "#2ecc71", label: "5 ุฏูุงุฆู" },
          { color: "#00d4ff", label: "10 ุฏูุงุฆู" }
        ]);
        setInfo("Service Area ูุญุฏุฏ ุฃูู ูุญุชุงุฌ ููุงุท ุฏุนู ุฅุถุงููุฉ.");
      },

      s33: () => {
        clearLayers();
        enableSpotlight(false);

        addMarker([36.21, 37.14], "critical", "H");
        addMarker([36.23, 37.12], "critical", "E");
        addMarker([36.20, 37.16], "critical", "C");

        map.flyTo([36.22, 37.13], 14, { duration: 1.4 });

        setTooltip("Sensitive Assets", "ุชุญุฏูุฏ ููุดุขุช ุญุณุงุณุฉ ุฏุงุฎู ุงููุฏููุฉ ูุฑุจุทูุง ุจุจูุงูุงุช ุฃููููุฉ.");
        setLegend("Assets", [
          { color: "#f39c12", label: "ููุดุฃุฉ ุญุณุงุณุฉ" }
        ]);
        setInfo("ุงูููุดุขุช ุงูุญุณุงุณุฉ ุชุญุชุงุฌ ุทุจูุงุช ุญูุงูุฉ + ูุฑุงูุจุฉ.");
      },

      s34: () => {
        clearLayers();
        enableSpotlight(true);

        addHeat([36.22, 37.13], 14);

        map.flyTo([36.22, 37.13], 13, { duration: 1.5 });

        setTooltip("Urban Risk", "Heatmap ุฏุงุฎู ุงููุฏููุฉ ููุถุญ ุฃูู ุชุชุฑูุฒ ุงููุฎุงุทุฑ ุฃู ุงููุดุงุท.");
        setLegend("Urban Risk", [
          { color: "#ff4d4d", label: "ุฎุทุฑ ูุฑุชูุน" }
        ]);
        setInfo("ุงูุชุญููู ุงูุญุถุฑู ูุนุทู ูุชุงุฆุฌ ุฏูููุฉ ุจุณุจุจ ูุซุงูุฉ ุงูุจูุงูุงุช.");
      },

      s35: () => {
        clearLayers();
        enableSpotlight(false);

        const monitors = [
          [36.215, 37.125],
          [36.225, 37.145],
          [36.235, 37.110],
          [36.205, 37.155]
        ];

        monitors.forEach((m, i) => {
          addMarker(m, "friendly", "M" + (i + 1));
          addBuffer(m, 1500, "#00d4ff", true);
        });

        map.flyTo([36.22, 37.13], 14, { duration: 1.5 });

        setTooltip("Coverage Planning", "ุชูุฒูุน ููุงุท ุงููุฑุงูุจุฉ ูุชูููู ุงููุฑุงุบุงุช ูุชุญููู ุชุบุทูุฉ ุฃูุถู.");
        setLegend("Coverage", [
          { color: "#00d4ff", label: "ููุทุฉ ูุฑุงูุจุฉ" }
        ]);
        setInfo("ุชุฏุงุฎู ุงูุฏูุงุฆุฑ ูุนูู ุชุบุทูุฉ ูููุฉ.");
      },

      s36: () => {
        clearLayers();
        enableSpotlight(false);

        addMarker([36.215, 37.125], "friendly", "A");
        addMarker([36.225, 37.145], "critical", "B");
        addMarker([36.235, 37.110], "risk", "C");

        map.flyTo([36.22, 37.13], 14, { duration: 1.4 });

        setTooltip("Symbology", "ุงูุฑููุฒ ูุงูุฃููุงู ูุบุฉ. ูุฌุจ ุฃู ุชููู ูุงุถุญุฉ ูุณุฑูุนุฉ ุงูููู.");
        setLegend("Symbology", [
          { color: "#3498db", label: "ุตุฏูู / ูุฑูุฒ" },
          { color: "#f39c12", label: "ููุดุฃุฉ" },
          { color: "#ff4d4d", label: "ุฎุทุฑ" }
        ]);
        setInfo("ูู ุงูุฃูุธูุฉ ุงูุฏูุงุนูุฉ: ุงูุฑูุฒูุฉ ุฃูู ูู ุงูุฌูุงู.");
      },

      s37: () => {
        clearLayers();
        enableSpotlight(true);

        addMarker(aleppo, "friendly", "RBAC");
        map.flyTo(aleppo, 12, { duration: 1.4 });

        setTooltip("RBAC", "ูุธุงู ุงูุตูุงุญูุงุช ูููุน ุชุณุฑุจ ุงูุจูุงูุงุช ููุญุฏุฏ ูู ูุฑู ูุงุฐุง.");
        setLegend("Security", [
          { color: "#00d4ff", label: "ูุณุชุฎุฏู ูุฎูู" }
        ]);
        setInfo("RBAC = Role Based Access Control.");
      },

      s38: () => {
        clearLayers();
        enableSpotlight(false);

        addMarker(aleppo, "friendly", "LOG");
        map.flyTo(aleppo, 12, { duration: 1.4 });

        setTooltip("Logs", "ุงูุณุฌู ุงูุชุงุฑูุฎู ููู: ุฃู ุชุบููุฑ ูุฌุจ ุฃู ูููู ูุญููุธุงู ูููุฑุงุฌุนุฉ.");
        setLegend("Monitoring", [
          { color: "#2ecc71", label: "ุชุณุฌูู ุฃุญุฏุงุซ" }
        ]);
        setInfo("Logs = Audit Trail.");
      },

      s39: () => {
        clearLayers();
        enableSpotlight(false);

        addMarker(aleppo, "friendly", "DEC");
        addHeat([36.22, 37.13], 10);

        map.flyTo(aleppo, 12, { duration: 1.4 });

        setTooltip("Decision Support", "ุงูุฎุฑูุทุฉ ุชุตุจุญ ุฃุฏุงุฉ ูุฑุงุฑ ุนูุฏูุง ุชูุฏูุฌ ุจุงูุชุญููู ูุงูุฅุญุตุงุฆูุงุช.");
        setLegend("Decision", [
          { color: "#00d4ff", label: "ูุฑูุฒ ูุฑุงุฑ" },
          { color: "#ff4d4d", label: "ุชุญููู ูุฎุงุทุฑ" }
        ]);
        setInfo("GIS = Decision Support System.");
      },

      s40: () => {
        clearLayers();
        enableSpotlight(true);

        map.flyTo(syriaCenter, 6, { duration: 2 });

        addMarker([35.2, 38.5], "friendly", "MoD");
        addBuffer([35.2, 38.5], 250000, "#00d4ff");

        setTooltip("Ministry of Defense", "ูุฒุงุฑุฉ ุงูุฏูุงุน ุชุญุชุงุฌ ููุตุฉ ุชูุญูุฏ ูู ุงูุจูุงูุงุช ูุงูุทุจูุงุช ูุงูุชุญูููุงุช.");
        setLegend("Defense", [
          { color: "#00d4ff", label: "ูุทุงู ูุฒุงุฑุฉ ุงูุฏูุงุน" }
        ]);
        setInfo("GIS ุงูุฏูุงุนู ูุนูู ุฅุฏุงุฑุฉ ููุงุฑุฏุ ูุฑุงูุจุฉุ ูุชุญููู ูุชุนุฏุฏ ุงููุณุชููุงุช.");
      },

      s41: () => {
        clearLayers();
        enableSpotlight(false);

        addMarker([35.2, 38.5], "friendly", "API");
        addMarker([36.2, 37.1], "friendly", "SYS");
        addRoute([[35.2, 38.5], [36.2, 37.1]], "#2ecc71");

        map.flyTo([35.7, 37.8], 7, { duration: 1.5 });

        setTooltip("Integration", "ุงููุธุงู ูููู ุฑุจุทู ูุน ููุงุนุฏ ุจูุงูุงุช ูุฃูุธูุฉ ุฃุฎุฑู ุนุจุฑ API.");
        setLegend("Integration", [
          { color: "#2ecc71", label: "ุชูุงูู ุจูู ุฃูุธูุฉ" }
        ]);
        setInfo("API Integration ูุฌุนู ุงููุธุงู ููุตุฉ ูุฑูุฒูุฉ.");
      },

      s42: () => {
        clearLayers();
        enableSpotlight(false);

        map.flyTo(middleEastCenter, 5, { duration: 2 });

        setTooltip("Scalability", "ููุณ ุงููุธุงู ูููู ุชูุณูุนู ูู ูุฏููุฉ ุฅูู ุฏููุฉ ุฅูู ุฅูููู ุจุณูููุฉ.");
        setLegend("Scalability", [
          { color: "#00d4ff", label: "ูุทุงู ุชูุณุน" }
        ]);
        setInfo("ุฅุฐุง ุจููุช ุงูุจูุงูุงุช ุจุดูู ุตุญูุญโฆ ุงูุชูุณุน ูุตุจุญ ุณููุงู.");
      },

      s43: () => {
        clearLayers();
        enableSpotlight(false);

        addMarker([35.2, 38.5], "critical", "PDF");
        map.flyTo([35.2, 38.5], 7, { duration: 1.5 });

        setTooltip("Reports", "ุงูุชูุงุฑูุฑ ุงูุฑุณููุฉ ุฌุฒุก ุฃุณุงุณู: ุฎุฑุงุฆุท + ุฌุฏุงูู + ูุคุดุฑุงุช + ููุฎุต.");
        setLegend("Reports", [
          { color: "#f39c12", label: "ุชูุฑูุฑ ุฑุณูู" }
        ]);
        setInfo("ุงูุชูุฑูุฑ = ุงููุฎุฑุฌ ุงูุฑุณูู ููุฑุงุฑ ุงูููุงุฏุฉ.");
      },

      s44: () => {
        clearLayers();
        enableSpotlight(false);

        addMarker(middleEastCenter, "friendly", "GIS");
        map.flyTo(middleEastCenter, 5, { duration: 1.8 });

        setTooltip("Summary", "ูุฐุง ุงููุดุฑูุน ูุซุจุช ุฃู GIS ูุธุงู ููุงุฏุฉ ูุชุญููู ูููุณ ูุฌุฑุฏ ุฎุฑูุทุฉ.");
        setLegend("Summary", [
          { color: "#00d4ff", label: "GIS Platform" }
        ]);
        setInfo("GIS = ุจูุงูุงุช + ุชุญููู + ุนุฑุถ + ูุฑุงุฑ.");
      },

      s45: () => {
        clearLayers();
        enableSpotlight(false);

        addMarker(middleEastCenter, "critical", "LIVE");
        map.flyTo(middleEastCenter, 5, { duration: 1.8 });

        setTooltip("Final", "ุงูุขู ููููู ุนุฑุถ ุงููููุน ุงูุญูููู ูุดุฑุญ ููู ุชู ุจูุงุก ูู ุทุจูุฉ ูุชุญููู.");
        setLegend("Project", [
          { color: "#f39c12", label: "ุงููุดุฑูุน ุงูุญูููู" }
        ]);
        setInfo("ููููู ุงูุขู ุงูุงูุชูุงู ููุฑุงุจุท ูุดุฑุญ ุงููุงุฌูุฉ ูุจุงุดุฑุฉ .");
      }
    };

    // Intersection Observer
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const id = entry.target.dataset.step;
          currentIndex = order.indexOf(id);

          updateProgress();
          playSound();

          if (actions[id]) actions[id]();

          // Smooth highlight
          steps.forEach(s => s.classList.remove("active"));
          entry.target.classList.add("active");
        }
      });
    }, { threshold: 0.55 });

    steps.forEach(step => observer.observe(step));

    // NAV BUTTONS
    const nextBtn = document.getElementById("nextBtn");
    const prevBtn = document.getElementById("prevBtn");

    nextBtn.onclick = () => {
      if (currentIndex < order.length - 1) {
        steps[currentIndex + 1].scrollIntoView({ behavior: "smooth" });
      }
    };

    prevBtn.onclick = () => {
      if (currentIndex > 0) {
        steps[currentIndex - 1].scrollIntoView({ behavior: "smooth" });
      }
    };

    // Restart
    document.getElementById("restartBtn").onclick = () => {
      steps[0].scrollIntoView({ behavior: "smooth" });
    };

    updateProgress();
	
	// ----- IFRAME POPUP CONTROLS -----
const iframeModal = document.getElementById("iframeModal");
const liveIframe = document.getElementById("liveIframe");
const openIframeBtn = document.getElementById("openIframeBtn");
const closeIframe = document.getElementById("closeIframe");

// ุนูุฏ ุงูุถุบุท ุนูู ุงูุฒุฑ ุชุธูุฑ ุงููุงูุฐุฉ ูุชุญููู ุงููููุน
openIframeBtn.onclick = () => {
  liveIframe.src = "https://yasseralmofaalani.github.io/military-operations-system/";
  iframeModal.style.display = "block";
};

// ุฅุบูุงู ุงููุงูุฐุฉ
closeIframe.onclick = () => {
  iframeModal.style.display = "none";
  liveIframe.src = ""; // ุชูุฑูุบ ุงูู src ูุฅููุงู ุชุญููู ุงูุตูุญุฉ
};

// ุฅุบูุงู ุนูุฏ ุงูุถุบุท ุฎุงุฑุฌ ุงูุฅุทุงุฑ
iframeModal.onclick = (e) => {
  if (e.target === iframeModal) {
    iframeModal.style.display = "none";
    liveIframe.src = "";
  }
};

  </script>

</body>

</html>
